(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-49d4"],{ZwYD:function(e,t,r){},eGdN:function(e,t,r){"use strict";var a=r("ZwYD");r.n(a).a},kP7L:function(e,t,r){"use strict";r.r(t);var a=r("Nlzp"),o={data:function(){return{statusOption:[{status:1,label:"抢票中"},{status:2,label:"交易成功"},{status:3,label:"交易失败"}],total:null,listLoading:!1,submitLogining:!1,dialogOption:{title:"新增",status:!1},rules:{origin:[{required:!0,message:"请输入出发地",trigger:"change"}],destination:[{required:!0,message:"请输入目的地",trigger:"change"}],departureDate:[{required:!0,message:"请输入出发时间",trigger:"change"}],trainNumber:[{required:!0,message:"请输入车次",trigger:"change"}],seat:[{required:!0,message:"请输入座位",trigger:"change"}],price:[{required:!0,message:"请输入抢票价",trigger:"change"}]},Backup:{passengerList:[{name:"",idCard:""}]},orderListForm:{id:"",ownerInfo:{wxAccount:"",wxNickname:"",phone:""},origin:"",destination:"",departureDate:"",trainNumber:"",seat:"",price:"",passengerList:[{name:"",idCard:""}]},multipleSelection:[],orderIdList:[],orderList:[],NumberValue:0,form:{},addFormVisible:!1,param:{data:{},page:{page:1,size:10},sid:this.$store.getters.accountToken}}},mounted:function(){this.getOrderList()},methods:{removeDomain:function(e){var t=this.orderListForm.passengerList.indexOf(e);-1!==t&&this.orderListForm.passengerList.splice(t,1)},addDomain:function(){this.orderListForm.passengerList.push({name:"",idCard:""})},batch:function(){var e=this;this.param.data={},this.$confirm("确定删除任务?","Prompt",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(function(){e.param.data.orderIdList=e.orderIdList,a.a.orderApi.deleteOrder(e.param).then(function(t){e.getOrderList()})}).catch(function(){})},handleSelectionChange:function(e){this.multipleSelection=e,this.orderIdList=this.multipleSelection.map(function(e){return e.id}),console.log(this.orderIdList)},cleardata:function(){this.form.queryText=""},handleEdit:function(e,t){var r=this;this.param.data.id=t.id,a.a.orderApi.getOrderDetail(this.param).then(function(e){r.orderListForm=e.data.data}),this.addFormVisible=!0,this.dialogOption.title="编辑"},onsavaorderList:function(e){var t=this;this.param.data=this.orderListForm,this.submitLogining=!0,this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;a.a.orderApi.orderSave(t.param).then(function(e){t.addFormVisible=!1,t.orderListForm.passengerList=t.Backup.passengerList,t.$notify({title:"成功",message:e.data.state.msg,type:"success"}),t.submitLogining=!1})})},handleCurrentChange:function(e){this.param.page.page=e,this.param.data={},this.param.data[this.form.queryParam]=this.form.queryText,this.getOrderList()},handleClose:function(e){this.$refs[e].resetFields(),this.orderListForm.id="",this.orderListForm.ownerInfo.wxAccount=null,this.orderListForm.ownerInfo.wxNickname=null,this.orderListForm.ownerInfo.phone=null,this.orderListForm.passengerList=this.Backup.passengerList,this.addFormVisible=!1},handleAdd:function(){this.dialogOption.title="新增",this.addFormVisible=!0},getInfo:function(){this.param.data={},this.param.data=this.form,this.getOrderList()},getOrderList:function(){var e=this;this.listLoading=!0,a.a.orderApi.getOrderList(this.param).then(function(t){e.orderList=t.data.data,e.total=t.data.page.total,e.listLoading=!1})}}},i=(r("eGdN"),r("ZrdR")),s=Object(i.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticStyle:{padding:"20px"}},[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0"},attrs:{span:24}},[r("el-form",{ref:"form",attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"微信昵称"}},[r("el-input",{attrs:{placeholder:"请输入微信昵称"},model:{value:e.form.ownerWxNickName,callback:function(t){e.$set(e.form,"ownerWxNickName",t)},expression:"form.ownerWxNickName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{attrs:{placeholder:"请输入乘客姓名"},model:{value:e.form.passengerName,callback:function(t){e.$set(e.form,"passengerName",t)},expression:"form.passengerName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证号"}},[r("el-input",{attrs:{placeholder:"请输入乘客身份证号"},model:{value:e.form.passengerIdCard,callback:function(t){e.$set(e.form,"passengerIdCard",t)},expression:"form.passengerIdCard"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"抢票人员"}},[r("el-input",{attrs:{placeholder:"请输入抢票人员"},model:{value:e.form.robbingUserName,callback:function(t){e.$set(e.form,"robbingUserName",t)},expression:"form.robbingUserName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),r("el-option",{attrs:{label:"抢票中",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"交易成功",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"交易关闭",value:"3"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"创建日期"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.createDateMin,callback:function(t){e.$set(e.form,"createDateMin",t)},expression:"form.createDateMin"}}),e._v(" "),r("span",[e._v("-")]),e._v(" "),r("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.createDateMax,callback:function(t){e.$set(e.form,"createDateMax",t)},expression:"form.createDateMax"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"抢票时间"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择日期时间",timestamp:""},model:{value:e.form.departureDateMin,callback:function(t){e.$set(e.form,"departureDateMin",t)},expression:"form.departureDateMin"}}),e._v(" "),r("span",[e._v("-")]),e._v(" "),r("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",timestamp:"",placeholder:"选择日期时间"},model:{value:e.form.departureDateMax,callback:function(t){e.$set(e.form,"departureDateMax",t)},expression:"form.departureDateMax"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.getInfo}},[e._v("查询")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.orderList,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),r("el-table-column",{attrs:{label:"微信昵称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.ownerInfo.wxNickname))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"departureDateStr",label:"出发日期",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"origin",label:"出发地",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"destination",label:"目的地",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"trainNumber",label:"车次",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"seat",label:"座位",width:"140"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.passengerList[0]?r("span",e._l(t.row.passengerList,function(t,a){return r("span",{key:a},[e._v("\n              "+e._s(t.name)+"、\n            ")])})):r("span")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"身份证号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.passengerList[0]?r("span",e._l(t.row.passengerList,function(t,a){return r("span",{key:a},[e._v("\n              "+e._s(t.idCard)+"、\n            ")])})):r("span")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"price",label:"价格",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"profit",label:"收益",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"robbingTicketUserName",label:"抢票人员",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"statusStr",label:"状态",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"portalUserName",label:"接单人员",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createdAtStr",label:"创建时间",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",staticStyle:{margin:"20px"},attrs:{span:24}},[r("el-button",{attrs:{disabled:0===e.multipleSelection.length,type:"warning"},on:{click:e.batch}},[e._v("批量删除")]),e._v(" "),r("el-pagination",{staticStyle:{float:"right"},attrs:{"page-size":e.param.page.size,total:e.total,layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t},close:function(t){e.handleClose("orderListForm")}}},[r("div",{staticClass:"el-dialog__title",staticStyle:{margin:"-30px 0 20px 0"}},[e._v(e._s(e.dialogOption.title))]),e._v(" "),r("el-form",{ref:"orderListForm",staticClass:"active",attrs:{"label-position":"left",rules:e.rules,model:e.orderListForm,"label-width":"120px"}},[r("el-form-item",{staticStyle:{display:"none"},model:{value:e.orderListForm.id,callback:function(t){e.$set(e.orderListForm,"id",t)},expression:"orderListForm.id"}}),e._v(" "),r("el-form-item",{attrs:{label:"微信号",prop:"ownerInfo.wxAccount",rules:[{required:!0,message:"请输入微信号",trigger:"blur"}]}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.ownerInfo.wxAccount,callback:function(t){e.$set(e.orderListForm.ownerInfo,"wxAccount",t)},expression:"orderListForm.ownerInfo.wxAccount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"微信昵称",prop:"ownerInfo.wxNickname",rules:[{required:!0,message:"请输入微信昵称",trigger:"blur"}]}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.ownerInfo.wxNickname,callback:function(t){e.$set(e.orderListForm.ownerInfo,"wxNickname",t)},expression:"orderListForm.ownerInfo.wxNickname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"业主手机号",prop:"phone"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.ownerInfo.phone,callback:function(t){e.$set(e.orderListForm.ownerInfo,"phone",t)},expression:"orderListForm.ownerInfo.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出发地",prop:"origin"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.origin,callback:function(t){e.$set(e.orderListForm,"origin",t)},expression:"orderListForm.origin"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"目的地",prop:"destination"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.destination,callback:function(t){e.$set(e.orderListForm,"destination",t)},expression:"orderListForm.destination"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出发日期",prop:"departureDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.orderListForm.departureDate,callback:function(t){e.$set(e.orderListForm,"departureDate",t)},expression:"orderListForm.departureDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"车次",prop:"trainNumber"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.trainNumber,callback:function(t){e.$set(e.orderListForm,"trainNumber",t)},expression:"orderListForm.trainNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"座位",prop:"seat"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.seat,callback:function(t){e.$set(e.orderListForm,"seat",t)},expression:"orderListForm.seat"}})],1),e._v(" "),e._l(e.orderListForm.passengerList,function(t,a){return r("el-form-item",{key:a,attrs:{label:"旅客信息"}},[r("el-input",{model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"domain.name"}}),r("el-input",{model:{value:t.idCard,callback:function(r){e.$set(t,"idCard",r)},expression:"domain.idCard"}}),e._v(" "),r("el-button",{on:{click:e.addDomain}},[e._v("+")]),e._v(" "),r("el-button",{on:{click:function(r){r.preventDefault(),e.removeDomain(t)}}},[e._v("-")])],1)}),e._v(" "),r("el-form-item",{attrs:{label:"抢票价",prop:"price"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.price,callback:function(t){e.$set(e.orderListForm,"price",t)},expression:"orderListForm.price"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"状态",prop:"status"}},[r("el-select",{model:{value:e.orderListForm.status,callback:function(t){e.$set(e.orderListForm,"status",t)},expression:"orderListForm.status"}},e._l(e.statusOption,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.status}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"接单人",prop:"portalUserName"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.portalUserName,callback:function(t){e.$set(e.orderListForm,"portalUserName",t)},expression:"orderListForm.portalUserName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"抢票人",prop:"robbingTicketUserName"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.orderListForm.robbingTicketUserName,callback:function(t){e.$set(e.orderListForm,"robbingTicketUserName",t)},expression:"orderListForm.robbingTicketUserName"}})],1),e._v(" "),r("el-form-item",{attrs:{"label-width":"120px"}},[r("el-button",{attrs:{loading:e.submitLogining,type:"primary"},on:{click:function(t){e.onsavaorderList("orderListForm")}}},[e._v("保存")])],1)],2)],1)],1)},[],!1,null,null,null);s.options.__file="index.vue";t.default=s.exports}}]);